<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>$BBBBB Buyback & Burn Dashboard</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      background: linear-gradient(135deg, #0a0015 0%, #1a0030 50%, #0a0015 100%);
      color: #fff;
      font-family: 'Segoe UI', sans-serif;
      min-height: 100vh;
      padding: 20px;
    }

    .container {
      max-width: 1200px;
      margin: 0 auto;
    }

    header {
      text-align: center;
      margin-bottom: 40px;
    }

    h1 {
      font-size: 48px;
      background: linear-gradient(90deg, #ff00ff, #00ffff, #ff00ff);
      background-size: 200% auto;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: rainbow 3s linear infinite;
    }

    @keyframes rainbow {
      0% { background-position: 0% center; }
      100% { background-position: 200% center; }
    }

    .subtitle {
      color: #888;
      margin-top: 10px;
      font-size: 18px;
    }

    .status-badge {
      display: inline-block;
      padding: 8px 20px;
      border-radius: 50px;
      margin-top: 15px;
      font-weight: bold;
      text-transform: uppercase;
      font-size: 14px;
    }

    .status-idle { background: #333; color: #888; }
    .status-checking { background: #444; color: #fff; }
    .status-swapping { background: #ff00ff; color: #fff; animation: pulse 1s infinite; }
    .status-burning { background: #ff4400; color: #fff; animation: pulse 0.5s infinite; }
    .status-error { background: #ff0000; color: #fff; }

    @keyframes pulse {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.7; }
    }

    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 20px;
      margin-bottom: 40px;
    }

    .stat-card {
      background: rgba(255, 255, 255, 0.05);
      border: 1px solid rgba(255, 255, 255, 0.1);
      border-radius: 20px;
      padding: 30px;
      text-align: center;
    }

    .stat-card.highlight {
      border-color: #ff00ff;
      box-shadow: 0 0 30px rgba(255, 0, 255, 0.2);
    }

    .stat-icon {
      font-size: 48px;
      margin-bottom: 15px;
    }

    .stat-value {
      font-size: 36px;
      font-weight: bold;
      color: #00ffff;
      margin-bottom: 5px;
    }

    .stat-label {
      color: #888;
      font-size: 14px;
      text-transform: uppercase;
      letter-spacing: 1px;
    }

    .balances {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
      margin-bottom: 40px;
    }

    .balance-card {
      background: rgba(0, 255, 255, 0.05);
      border: 1px solid #00ffff;
      border-radius: 15px;
      padding: 20px;
      text-align: center;
    }

    .balance-value {
      font-size: 28px;
      font-weight: bold;
      color: #00ffff;
    }

    .balance-label {
      color: #888;
      font-size: 12px;
      margin-top: 5px;
    }

    .activity-section {
      background: rgba(0, 0, 0, 0.3);
      border-radius: 20px;
      padding: 20px;
    }

    .activity-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 15px;
    }

    .activity-title {
      font-size: 20px;
      color: #fff;
    }

    .activity-list {
      max-height: 400px;
      overflow-y: auto;
    }

    .activity-item {
      padding: 12px 15px;
      border-radius: 10px;
      margin-bottom: 8px;
      font-size: 14px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .activity-item.claim { background: rgba(0, 255, 0, 0.1); border-left: 3px solid #00ff00; }
    .activity-item.swap { background: rgba(255, 0, 255, 0.1); border-left: 3px solid #ff00ff; }
    .activity-item.burn { background: rgba(255, 100, 0, 0.1); border-left: 3px solid #ff6400; }
    .activity-item.error { background: rgba(255, 0, 0, 0.1); border-left: 3px solid #ff0000; }
    .activity-item.info { background: rgba(255, 255, 255, 0.05); border-left: 3px solid #666; }

    .activity-time {
      color: #666;
      font-size: 12px;
    }

    .tx-link {
      color: #00ffff;
      text-decoration: none;
      font-size: 12px;
    }

    .tx-link:hover {
      text-decoration: underline;
    }

    .last-burn {
      margin-top: 20px;
      padding: 15px;
      background: rgba(255, 100, 0, 0.1);
      border: 1px solid #ff6400;
      border-radius: 10px;
      text-align: center;
    }

    .last-burn-label {
      color: #888;
      font-size: 12px;
      margin-bottom: 5px;
    }

    .last-burn-value {
      color: #ff6400;
      font-size: 20px;
      font-weight: bold;
    }
  </style>
</head>
<body>
  <div class="container">
    <header>
      <h1>üóëÔ∏è $BBBBB BUYBACK & BURN üî•</h1>
      <p class="subtitle">BaBa BIN burns the supply - deflationary tokenomics</p>
      <div class="status-badge status-idle" id="statusBadge">IDLE</div>
    </header>

    <div class="stats-grid">
      <div class="stat-card highlight">
        <div class="stat-icon">üî•</div>
        <div class="stat-value" id="totalBurned">0</div>
        <div class="stat-label">Total $BBBBB Burned</div>
      </div>

      <div class="stat-card">
        <div class="stat-icon">üí∞</div>
        <div class="stat-value" id="totalSolUsed">0</div>
        <div class="stat-label">Total SOL Used</div>
      </div>

      <div class="stat-card">
        <div class="stat-icon">üî¢</div>
        <div class="stat-value" id="burnCount">0</div>
        <div class="stat-label">Burn Transactions</div>
      </div>
    </div>

    <div class="balances">
      <div class="balance-card">
        <div class="balance-value" id="solBalance">0.0000</div>
        <div class="balance-label">SOL Balance</div>
      </div>
      <div class="balance-card">
        <div class="balance-value" id="tokenBalance">0</div>
        <div class="balance-label">$BBBBB Balance (pending burn)</div>
      </div>
    </div>

    <div class="last-burn" id="lastBurn" style="display: none;">
      <div class="last-burn-label">LAST BURN</div>
      <div class="last-burn-value" id="lastBurnAmount">0 $BBBBB</div>
      <a class="tx-link" id="lastBurnTx" href="#" target="_blank">View Transaction ‚Üí</a>
    </div>

    <div class="activity-section">
      <div class="activity-header">
        <span class="activity-title">üìú Activity Log</span>
      </div>
      <div class="activity-list" id="activityList">
        <div class="activity-item info">
          <span>Connecting to bot...</span>
        </div>
      </div>
    </div>
  </div>

  <script>
    const statusBadge = document.getElementById('statusBadge');
    const totalBurned = document.getElementById('totalBurned');
    const totalSolUsed = document.getElementById('totalSolUsed');
    const burnCount = document.getElementById('burnCount');
    const solBalance = document.getElementById('solBalance');
    const tokenBalance = document.getElementById('tokenBalance');
    const lastBurn = document.getElementById('lastBurn');
    const lastBurnAmount = document.getElementById('lastBurnAmount');
    const lastBurnTx = document.getElementById('lastBurnTx');
    const activityList = document.getElementById('activityList');

    function formatNumber(num) {
      if (num >= 1e9) return (num / 1e9).toFixed(2) + 'B';
      if (num >= 1e6) return (num / 1e6).toFixed(2) + 'M';
      if (num >= 1e3) return (num / 1e3).toFixed(2) + 'K';
      return num.toLocaleString();
    }

    function formatTime(timestamp) {
      return new Date(timestamp).toLocaleTimeString();
    }

    function updateStats(stats) {
      totalBurned.textContent = formatNumber(stats.totalBurned);
      totalSolUsed.textContent = stats.totalSolUsed.toFixed(4);
      burnCount.textContent = stats.burnCount;

      if (stats.lastBurnTime) {
        lastBurn.style.display = 'block';
        lastBurnAmount.textContent = formatNumber(stats.lastBurnAmount) + ' $BBBBB';
        if (stats.lastBurnTx) {
          lastBurnTx.href = `https://solscan.io/tx/${stats.lastBurnTx}`;
        }
      }
    }

    function updateStatus(status) {
      statusBadge.className = `status-badge status-${status}`;
      statusBadge.textContent = status.toUpperCase();
    }

    function updateBalances(sol, tokens) {
      solBalance.textContent = sol.toFixed(4);
      tokenBalance.textContent = formatNumber(tokens);
    }

    function addActivity(activity) {
      const div = document.createElement('div');
      div.className = `activity-item ${activity.type}`;

      let html = `<span>${activity.message}</span>`;
      html += `<span class="activity-time">${formatTime(activity.timestamp)}`;

      if (activity.tx) {
        html += ` <a class="tx-link" href="https://solscan.io/tx/${activity.tx}" target="_blank">tx</a>`;
      }
      html += '</span>';

      div.innerHTML = html;
      activityList.insertBefore(div, activityList.firstChild);

      // Keep max 50 items
      while (activityList.children.length > 50) {
        activityList.removeChild(activityList.lastChild);
      }
    }

    // WebSocket connection
    function connect() {
      const protocol = window.location.protocol === 'https:' ? 'wss:' : 'ws:';
      const ws = new WebSocket(`${protocol}//${window.location.host}`);

      ws.onopen = () => {
        console.log('Connected to bot');
        activityList.innerHTML = '';
        addActivity({ type: 'info', message: 'üü¢ Connected to bot', timestamp: Date.now() });
      };

      ws.onmessage = (event) => {
        const data = JSON.parse(event.data);

        switch (data.type) {
          case 'init':
            updateStats(data.stats);
            updateStatus(data.status);
            updateBalances(data.solBalance, data.tokenBalance);
            data.activities.forEach(addActivity);
            break;

          case 'activity':
            addActivity(data.activity);
            break;

          case 'status':
            updateStatus(data.status);
            break;

          case 'balances':
            updateBalances(data.solBalance, data.tokenBalance);
            break;

          case 'stats':
            updateStats(data.stats);
            break;
        }
      };

      ws.onclose = () => {
        console.log('Disconnected, reconnecting...');
        addActivity({ type: 'error', message: 'üî¥ Disconnected - reconnecting...', timestamp: Date.now() });
        setTimeout(connect, 3000);
      };

      ws.onerror = (error) => {
        console.error('WebSocket error:', error);
      };
    }

    connect();
  </script>
</body>
</html>
